---
layout: post
title: "GSoC Project Report: Continuous Integration for Hardware Projects on LibreCores CI"
description: ""
category:
tags: ['GSoC', 'LibrecoresCI' ,'FOSSi-Foundation']
author: Nancy Chauhan
---

Librecores provides a platform to share projects and ideas, in the area of free and open-source digital hardware design. Librecores CI is a service to provide CI for hardware projects hosted on Librecores to improve user experience and reliability.

In these summers I worked on developing continuous integration solution for hardware Projects such as OpenRISC, a family of free and open-source processor implementations on the RISC architecture.

I worked from May to August 2019. In this project I worked on contrasting technologies (EDA tools, processors, Docker, Jenkins, Groovy DSL & Jenkins Shared library) and GitHub organizations (OpenRISC, LibreCores, FuseSoC ) with the following goals:

1) Recover OpenRISC CI pipelines and modify them to use standard LibreCores images

2) Optimise CI Pipelines with new test automation

3) Develop Yosys Synthesis Metrics Parse and add to LibreCores CI base image

4) Integration of _Yosys Synthesis_ for monitoring resource usages and publishing on Jenkins

5) Exported OpenRISC test results to TAP and published on Jenkins

6) Move shared code of OpenRISC Pipelines to LibreCores Pipeline Library

7) Add TAP and Yosys code parsing & publishing steps to LibreCores Pipeline library

8) Default Pipeline for FuseSoC-based OpenRISC projects

## Community Bonding: Planning the solution

During the community bonding period, we planned over the goals of the project and its timeline. My mentors guided me for existing CI pipelines and solutions
to proceed with the project.

## Coding Phase

The coding phase consisted of 3 months, in which I implemented the ideas I proposed in my [GSoC proposal][proposal].

### First Phase

In the first month, I worked on recovering OpenRISC CI pipelines as it previously worked on Travis CI. The OpenRISC Continuous Integration (CI) suite is now running in a `librecores-ci-openrisc` docker container.

#### Links

1. [Modifying mor1k Travis CI flow to use Librecores-CI image][week2report]
2. [Coding Phase 1: Week 3 & 4][week4report]


### Second Phase

In the second phase, we started working on optimising CI pipelines. We completed work on Yosys synthesis with changes in core description file of mor1kx(FuseSoC). This goal led to developments and changes in FuseSoC backend _edalize_ with its newly released version ``v0.1.6 ``

#### Links

1) Blog: [Coding Phase 2 with Librecores CI, OpenRISC, Fusesoc & Jenkins][phase2report]

2) Presentation: [GSoC/Outreachy 2019: Mid-term project demos, part 2][midtermpresentation]

3) Demo Video: [GSoC/Outreachy 2019: Mid-term project demos, part 2][midtermdemo]

### Third Phase

The third month was about completing Yosys Synthesis and publishing its result [LibreCoresCI Jenkins server][lcciopenrisc] with plot plugin which also led to the release of new version _0.5.0_ of _Librecores CI base_ docker image.

I also worked on exporting OpenRISC test results to TAP Format and published on Jenkins with TAP plugin.

Finally, I worked on improving LibreCores Pipeline library for adding a generic pipelines for CI of the OpenRISC project. I also worked on generalising Yosys Synthesis so that it can be configured for various hardware projects with a simple declarative call.

#### Links

1) [Presentation: 2019 Summer Project Demos][presentation]

## Conclusion

Here is my [Project Dashboard][dashboard] which has all my contributions to the project.

#### What tasks were accomplished


| Tasks                            | Planned | Completed |
| ---------------------------------|:-------:| :--------:|
| Recover CI Pipelines             |   Yes   |    Yes    |
| OpenRISC CI pipelines In Jenkins |   Yes   |    Yes    |
| Docker Image for OpenRISC        |   Yes   |    Yes    |
| Yosys Metrics Parser             |   Yes   |    Yes    |
| Yosys Synthesis                  |   Yes   |    Yes    |
| Export Tests to TAP              |   Yes   |    Yes    |
| Publish results with plugins     |   Yes   |    Yes    |
| Openrisc Pipeline Library        |   Yes   |    Yes    |
| Yosys Synthesis Pipeline Library |   Yes   |    Yes    |
| Fusesoc Pipeline Library         |   Yes   |    Yes    |
| Open OCD / GDB                   |   Yes   |    No     |
| E-Mail Notification              |   Yes   |    WIP    |

## What did I learn in GSoC

1) Various technologies i.e Docker, Jenkins

1) Groovy Programming and developing Jenkins Shared Library

2) Concepts of DSL and Closure

3) Learned about various EDA Tools

## Future engagements

We are aiming to involve more hardware projects to use generalised LibreCores CI Pipeline library and tools.

Thank you Oleg Nenashev, Stafford Horne, Olofk Kindgren for helping me complete the goals for GSoC 2019.

Please send in your feedback at nancychn1@gmail.com

[proposal]: <***********________proposal_link_here________*********>
[phase2report]: http://nancychauhan.in/stories/2019/07/30/coding-phase2/
[week4report]: http://nancychauhan.in/stories/2019/06/28/gsoc-week3_4/
[week2report]: http://nancychauhan.in/stories/2019/06/08/gsoc-week1_2/
[lcciopenrisc]: https://ci.librecores.org/job/Projects/job/OpenRISC/
[dashboard]: https://github.com/orgs/librecores/projects/1
[presentation]: https://docs.google.com/presentation/d/10GbtgTQwdoZqCfPv5hhXnVffNXPT8BeGNx0H5PJAJuw/edit?usp=sharing
[midtermpresentation]: https://docs.google.com/presentation/d/1MyXM3xn0ZwbXyJpsaAi3q_CkBsdfXjbGQKcMuOk83i4/edit?usp=sharing
[midtermdemo]: https://www.youtube.com/watch?v=HlENuZZq7zc
